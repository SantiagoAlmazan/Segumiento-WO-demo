<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estaci√≥n Ensamble</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav>
    <a href="index.html">üè† Dashboard</a> |
    <a href="master.html">Master</a>
  </nav>

  <h1>ü™ö Estaci√≥n Ensamble</h1>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Descripci√≥n</th>
        <th>Piezas</th>
        <th>Clasificaci√≥n</th>
        <th>Estaci√≥n actual</th>
        <th>Acci√≥n</th>
      </tr>
    </thead>
    <tbody id="tabla-ensamble"></tbody>
  </table>

  <script src="script.js"></script>
  <script>
    function actualizarTablaEnsamble() {
      const allWOs = JSON.parse(localStorage.getItem("workOrders")) || [];
      const tbody = document.getElementById("tabla-ensamble");
      tbody.innerHTML = "";

      allWOs
        .filter(wo => wo.estado === "Ensamble")
        .forEach(wo => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${wo.id}</td>
            <td>${wo.descripcion}</td>
            <td>${wo.piezas}</td>
            <td>${wo.clasificacion}</td>
            <td>${wo.estado}</td>
            <td>
              <select onchange="moverWO('${wo.id}', this.value)">
                <option value="">Mover a...</option>
                <option value="Lija">Lija</option>
                <option value="Pintura">Pintura</option>
                <option value="Finalizado">Finalizado</option>
              </select>
            </td>
          `;
          tbody.appendChild(tr);
        });
    }

    function moverWO(id, nuevaEstacion) {
      if (!nuevaEstacion) return;
      const clave = prompt("Ingrese la contrase√±a del encargado:");
      if (clave !== "123") return alert("‚ùå Contrase√±a incorrecta");

      const allWOs = JSON.parse(localStorage.getItem("workOrders")) || [];
      const wo = allWOs.find(w => w.id === id);
      if (wo) {
        wo.estado = nuevaEstacion;
        localStorage.setItem("workOrders", JSON.stringify(allWOs));
        alert(`‚úÖ La WO ${id} ha sido movida a ${nuevaEstacion}`);
        actualizarTablaEnsamble();
      }
    }

    document.addEventListener("DOMContentLoaded", actualizarTablaEnsamble);
  </script>




</body>
</html>

